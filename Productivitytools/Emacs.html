<!DOCTYPE HTML>
<html>
    <head>
        <link rel="Stylesheet" type="text/css" href="/static/css/style.css">
        <title>Emacs - LinuxWiki</title>
        <meta name="keywords" content=""/>
        <meta name="description" content=""/>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body>
        <div id="container">
<a href="https://github.com/linuxwiki/SourceWiki"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/365986a132ccd6a44c23a9169022c0b5c890c387/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f7265645f6161303030302e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png"></a>
            
<div id="header">
  <div id="post-nav"><a href="/">Home</a>&nbsp;»&nbsp;<a href="/#Productivitytools">Productivitytools</a>&nbsp;»&nbsp;Emacs</div>
</div>
<div class="clearfix"></div>
<div id="title">Emacs</div>
  <div id="content">
  <div class="toc"><span class="toctitle">Table of Contents</span><ul>
<li><a href="#emacs24">一、Emacs24 的安装</a></li>
<li><a href="#_1">二、基本快捷键</a><ul>
<li><a href="#21">2.1 光标移动</a></li>
<li><a href="#22">2.2 文档编辑</a></li>
<li><a href="#23">2.3 搜索</a></li>
<li><a href="#24">2.4 文件操作(缓冲区)</a></li>
<li><a href="#25-windows">2.5 窗口(WINDOWS)操作</a></li>
</ul>
</li>
<li><a href="#_2">三、通用定制</a></li>
<li><a href="#_3">四、高级定制</a><ul>
<li><a href="#41-fill-column-indicator">4.1 代码参考线: fill-column-indicator</a></li>
<li><a href="#42-auto-complete">4.2 代码自动补全: auto-complete</a></li>
<li><a href="#43-highlight-symbol">4.3 相同符号高亮: highlight-symbol</a></li>
<li><a href="#44-markdown-markdown-mode">4.4 Markdown: markdown-mode</a></li>
<li><a href="#45-python-pythonel">4.5 Python: python.el</a></li>
<li><a href="#46-google-protobuf-buffer-protobuf-mode">4.6 Google Protobuf Buffer: protobuf-mode</a></li>
<li><a href="#47-c-xcscope-etags-c-mode">4.7 C++开发定制: xcscope + etags + c++-mode</a></li>
<li><a href="#48-emacs">4.8 Emacs主题</a></li>
</ul>
</li>
<li><a href="#_4">五、学习资源</a><ul>
<li><a href="#51">5.1 视频</a></li>
<li><a href="#52">5.2 网站(博客)</a></li>
<li><a href="#53">5.3 参考/扩展资料</a></li>
</ul>
</li>
</ul>
</div>
<p>世界上有三中程序员，一种是用 Vim 的，一种是用 Emacs 的，另外一种是用其它编辑器的。本文介绍 Emacs 的基本使用。</p>
<h1 id="emacs24">一、Emacs24 的安装</h1>
<div class="hlcode"><pre><span class="n">wget</span> <span class="n">https</span><span class="o">:</span><span class="c1">//github.com/mirrors/emacs/archive/emacs-24.3.92.zip</span>
<span class="n">unzip</span> <span class="n">emacs</span><span class="o">-</span><span class="mf">24.3.92</span><span class="p">.</span><span class="n">zip</span>
<span class="n">cd</span> <span class="n">emacs</span><span class="o">-</span><span class="mf">24.3.93</span>
<span class="p">.</span><span class="o">/</span><span class="n">autogen</span><span class="p">.</span><span class="n">sh</span>
<span class="p">.</span><span class="o">/</span><span class="n">configure</span> <span class="o">--</span><span class="n">without</span><span class="o">-</span><span class="n">makeinfo</span>
<span class="n">make</span> <span class="o">-</span><span class="n">j2</span>
<span class="n">sudo</span> <span class="n">make</span> <span class="n">install</span>
</pre></div>


<h1 id="_1">二、基本快捷键</h1>
<p>这里列出在没有打开任何 mode 的情况下，原生 Emacs 所支持的快捷键(快捷键映射关系: C-&gt;Ctrl, M-&gt;Alt/ESC)。</p>
<p><code>C-g</code> : 撤销命令(没事多摁几下，我都是没事摁着玩的)
<code>C-z</code> : 挂起 Emacs
<code>C-x C-c</code>: 关闭 Emacs</p>
<h2 id="21">2.1 光标移动</h2>
<ul>
<li><code>C-n</code> : 下一行</li>
<li><code>C-p</code> : 上一行</li>
<li><code>C-f</code> : 前进一个字符</li>
<li><code>C-b</code> : 后退一个字符</li>
<li><code>M-f</code> : 前进一个单词</li>
<li><code>M-b</code> : 后退一个单词</li>
<li><code>C-v</code> : 向下翻页</li>
<li><code>M-v</code> : 向上翻页</li>
<li><code>C-l</code> : 光标所在行移动到屏幕中央</li>
<li><code>C-a</code> : 行首</li>
<li><code>C-e</code> : 行尾</li>
<li><code>M-a</code> : 句首</li>
<li><code>M-e</code> : 句尾</li>
<li><code>M-&lt;</code> : 文件首</li>
<li><code>M-&gt;</code> : 文件尾</li>
</ul>
<h2 id="22">2.2 文档编辑</h2>
<ul>
<li><code>&lt;Backspace&gt;</code> : 向前删除一个字符</li>
<li><code>C-d</code> <code>&lt;DEL&gt;</code> : 向后删除一个字符，我一般用 <code>C-d</code></li>
<li><code>M-d</code> <code>M-&lt;DEL&gt;</code> : 向后删除一个单词</li>
<li><code>C-k</code> : 删除光标到行尾，删除一行用 <code>C-a, C-k</code> (Vim 中的 dd)。</li>
<li><code>M-k</code> : 删除光标到句尾</li>
<li><code>C-@</code> : 标记(Mark set), 标记之后配合光标移动快捷键，可以选中一个区域</li>
<li><code>M-w</code> : 复制</li>
<li><code>C-w</code> : 剪切</li>
<li><code>C-y</code> : 粘贴</li>
<li><code>C-/</code> : 撤销(UNDO)</li>
</ul>
<p>大小写转换:</p>
<ul>
<li><code>M-l</code>: Convert following word to lower case (downcase-word).</li>
<li><code>M-u</code>: Convert following word to upper case (upcase-word).</li>
<li><code>M-c</code>: Capitalize the following word (capital-word).</li>
<li><code>C-x C-l</code>: Convert region to lower case (downcase-region).</li>
<li><code>C-x C-u</code>: Convert region to upper case (upcase-region).</li>
</ul>
<p>块操作:</p>
<ul>
<li><code>C-x r k</code>: Kill the text of the region-rectangle, saving its contents as the “last killed rectangle” (kill-rectangle).</li>
<li><code>C-x r M-w</code>: Save the text of the region-rectangle as the “last killed rectangle” (copy-rectangle-as-kill).</li>
<li><code>C-x r d</code>: Delete the text of the region-rectangle (delete-rectangle).</li>
<li><code>C-x r y</code>: Yank the last killed rectangle with its upper left corner at point (yank-rectangle).</li>
<li><code>C-x r o</code>: Insert blank space to fill the space of the region-rectangle (open-rectangle). This pushes the previous contents of the region-rectangle to the right.</li>
<li><code>C-x r N</code>: Insert line numbers along the left edge of the region-rectangle (rectangle-number-lines). This pushes the previous contents of the region-rectangle to the right.</li>
<li><code>C-x r c</code>: Clear the region-rectangle by replacing all of its contents with spaces (clear-rectangle).</li>
<li><code>M-x delete-whitespace-rectangle</code>: Delete whitespace in each of the lines on the specified rectangle, starting from the left edge column of the rectangle.</li>
<li><code>C-x r t string &lt;RET&gt;</code>: Replace rectangle contents with string on each line (string-rectangle).</li>
<li><code>M-x string-insert-rectangle &lt;RET&gt; string &lt;RET&gt;</code>: Insert string on each line of the rectangle.</li>
</ul>
<h2 id="23">2.3 搜索</h2>
<ul>
<li><code>C-s</code> : 向前搜索</li>
<li><code>C-r</code> : 向后操作</li>
<li><code>C-g</code> : 回到搜索开始前的位置</li>
<li><code>M-%</code> : 询问并替换</li>
</ul>
<h2 id="24">2.4 文件操作(缓冲区)</h2>
<p>Emacs 可以打开很多文件，一个文件可以理解成一个 buffer，你可以在多个文件中来回切换。</p>
<ul>
<li><code>C-x f</code> : 打开一个文件</li>
<li><code>C-x s</code> : 保存</li>
<li><code>C-x C-w</code> : 另存为</li>
<li><code>C-x C-v</code> : 关闭当前缓冲区，并打开新文件</li>
<li><code>C-x C-b</code> : 打开缓冲区列表</li>
<li><code>C-x b</code> : 切回最近的 buffer</li>
<li><code>C-x k</code> : 关闭当前缓冲区</li>
</ul>
<h2 id="25-windows">2.5 窗口(WINDOWS)操作</h2>
<ul>
<li><code>C-x 1</code> : 只保留当前窗口</li>
<li><code>C-x 2</code> : 水平切分</li>
<li><code>C-x 3</code> : 垂直切分</li>
<li><code>C-x o</code> : 切换到另外一个窗口</li>
<li><code>C-x 0</code> : 关闭当前窗口(并不是删除buffer)</li>
</ul>
<h1 id="_2">三、通用定制</h1>
<p>默认的 Emacs 的快捷键有些不好用，比如 <code>C-x C-f</code> 时，没有任何提示。再如窗口切换使用 <code>C-x o</code>，当 Buffer 多时，非常不方便，这一节介绍 Emacs 通用的定制(不针对某种开发/编辑环境)。</p>
<p>Emacs 的配置文件为 <code>~/.emacs</code>，如果没有就 <code>touch</code> 一个，插件位置一般在 <code>~/.emacs.d</code>，如果没有就 <code>mkdir</code> 一个。Emacs 启动时会加载这些配置(也因此会减慢Emacs的启动速度，建议不要给Emacs装太多的插件，看着花哨但不实用)。</p>
<p>打开 <code>.emacs</code>，添加如下代码(Lisp):</p>
<div class="hlcode"><pre><span class="p">(</span><span class="nx">fset</span> <span class="s1">&#39;yes-or-no-p &#39;</span><span class="nx">y</span><span class="na">-or-n-p</span><span class="p">)</span> <span class="p">;</span> <span class="err">用</span> <span class="nx">y</span><span class="p">/</span><span class="nb">n</span> <span class="err">代替</span> <span class="nx">yes</span><span class="p">/</span><span class="nx">no</span>
<span class="p">(</span><span class="nx">setq</span> <span class="nx">make</span><span class="na">-backup-files</span> <span class="nx">nil</span><span class="p">)</span>  <span class="p">;</span> <span class="err">去掉自动备份，有利有弊，我嫌麻烦，就去掉了</span>
<span class="p">(</span><span class="nx">setq</span><span class="na">-default</span> <span class="nx">indent</span><span class="na">-tabs-mode</span> <span class="nx">nil</span><span class="p">)</span> <span class="p">;</span> <span class="err">空格代替</span> <span class="nx">tab</span>

<span class="p">(</span><span class="nx">show</span><span class="na">-paren-mode</span> <span class="nb">t</span><span class="p">)</span>           <span class="p">;</span> <span class="err">匹配括号高亮</span>
<span class="p">;;</span> <span class="err">使用</span> <span class="sb">`%`</span> <span class="err">进行匹配括号跳转</span><span class="p">(</span><span class="err">模仿</span><span class="nx">vim</span><span class="p">),</span> <span class="nx">Emacs</span> <span class="err">的内置的</span> <span class="sb">`C-M-p`</span> <span class="err">和</span> <span class="sb">`C-M-n`</span> <span class="err">是用来做</span>
<span class="p">;;</span> <span class="err">跳转的，但是这会和很多终端的快捷键冲突。所以一般用不了。</span>
<span class="p">(</span><span class="bp">global</span><span class="na">-set-key</span> <span class="s2">&quot;%&quot;</span> <span class="s1">&#39;match-paren)</span>
<span class="s1">(defun match-paren (arg)</span>
<span class="s1">  &quot;Go to the matching paren if on a paren; otherwise insert %.&quot;</span>
<span class="s1">  (interactive &quot;p&quot;)</span>
<span class="s1">  (cond ((looking-at &quot;</span><span class="se">\\</span><span class="s1">s\(&quot;) (forward-list 1) (backward-char 1))</span>
<span class="s1">    ((looking-at &quot;</span><span class="se">\\</span><span class="s1">s\)&quot;) (forward-char 1) (backward-list 1))</span>
<span class="s1">    (t (self-insert-command (or arg 1)))))</span>

<span class="s1">;; 括号自动补全和缩进</span>
<span class="s1">(require &#39;</span><span class="nx">electric</span><span class="p">)</span>
<span class="p">(</span><span class="nx">electric</span><span class="na">-indent-mode</span> <span class="nb">t</span><span class="p">)</span>
<span class="p">(</span><span class="nx">electric</span><span class="na">-pair-mode</span> <span class="nb">t</span><span class="p">)</span>
<span class="p">(</span><span class="nx">electric</span><span class="na">-layout-mode</span> <span class="nb">t</span><span class="p">)</span>

<span class="p">;;</span> <span class="err">保存时删除多余的空白字符</span>
<span class="p">(</span><span class="nb">add</span><span class="na">-hook</span> <span class="s1">&#39;before-save-hook &#39;</span><span class="nb">delete</span><span class="na">-trailing-whitespace</span><span class="p">)</span>
<span class="p">(</span><span class="nx">setq</span> <span class="nx">show</span><span class="na">-trailing-whitespace</span> <span class="nb">t</span><span class="p">)</span>

<span class="p">;;</span> <span class="err">优化打开文件和缓冲区切换，这下有提示了</span><span class="o">!</span><span class="p">(</span><span class="nx">ido</span><span class="err">是</span><span class="nx">Emacs</span><span class="err">自带的插件</span><span class="p">)</span>
<span class="p">(</span><span class="k">require</span> <span class="err">&#39;</span><span class="n">ido</span><span class="p">)</span>
<span class="p">(</span><span class="nx">ido</span><span class="na">-mode</span> <span class="nb">t</span><span class="p">)</span>

<span class="p">;;</span> <span class="sb">`C-x`</span> <span class="err">配合上下左右箭头，切换窗口</span> 
<span class="p">(</span><span class="bp">global</span><span class="na">-set-key</span> <span class="p">(</span><span class="nx">kbd</span> <span class="s2">&quot;C-x &lt;up&gt;&quot;</span><span class="p">)</span> <span class="s1">&#39;windmove-up)</span>
<span class="s1">(global-set-key (kbd &quot;C-x &lt;down&gt;&quot;) &#39;</span><span class="nx">windmove</span><span class="na">-down</span><span class="p">)</span>
<span class="p">(</span><span class="bp">global</span><span class="na">-set-key</span> <span class="p">(</span><span class="nx">kbd</span> <span class="s2">&quot;C-x &lt;right&gt;&quot;</span><span class="p">)</span> <span class="s1">&#39;windmove-right)</span>
<span class="s1">(global-set-key (kbd &quot;C-x &lt;left&gt;&quot;) &#39;</span><span class="nx">windmove</span><span class="na">-left</span><span class="p">)</span>

<span class="p">;;</span> <span class="err">使用</span> <span class="nx">M</span><span class="o">-</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="nx">...9</span><span class="p">)</span><span class="err">窗口切换，需要下载</span> <span class="nx">windows</span><span class="na">-numbering</span> <span class="err">这个插件，并手动加载</span>
<span class="p">;;</span> <span class="nx">windows</span><span class="na">-numbering</span> <span class="err">很好用，推荐</span><span class="o">!</span>
<span class="p">(</span><span class="nb">add</span><span class="na">-to-list</span> <span class="s1">&#39;load-path &quot;~/.emacs.d/lisp/window-numbering.el&quot;)</span>
<span class="s1">(require &#39;</span><span class="nx">window</span><span class="na">-numbering</span><span class="p">)</span>
<span class="p">(</span><span class="nx">setq</span> <span class="nx">window</span><span class="na">-numbering-assign-func</span>
      <span class="p">(</span><span class="nx">lambda</span> <span class="p">()</span> <span class="p">(</span><span class="nx">when</span> <span class="p">(</span><span class="nx">equal</span> <span class="p">(</span><span class="nx">buffer</span><span class="na">-name</span><span class="p">)</span> <span class="s2">&quot;*Calculator*&quot;</span><span class="p">)</span> <span class="mi">9</span><span class="p">)))</span>
<span class="p">(</span><span class="nx">window</span><span class="na">-numbering-mode</span> <span class="mi">1</span><span class="p">)</span>
</pre></div>


<p>Tip: <code>M-x eval-buffer</code> 可以使配置文件立即生效，调试非常方便。 </p>
<h1 id="_3">四、高级定制</h1>
<p>这一节针对不同的应用，介绍一些插件。</p>
<h2 id="41-fill-column-indicator">4.1 代码参考线: <a href="https://github.com/alpaker/Fill-Column-Indicator">fill-column-indicator</a></h2>
<div class="hlcode"><pre><span class="p">(</span><span class="n">require</span> <span class="err">&#39;</span><span class="n">fill</span><span class="o">-</span><span class="n">column</span><span class="o">-</span><span class="n">indicator</span><span class="p">)</span>
<span class="p">(</span><span class="n">setq</span> <span class="n">fci</span><span class="o">-</span><span class="n">rule</span><span class="o">-</span><span class="n">color</span> <span class="s">&quot;#333&quot;</span><span class="p">)</span> <span class="err">#</span> <span class="err">参考线颜色，我的配色是暗色的</span><span class="p">,</span> <span class="err">所以</span> <span class="err">#</span><span class="mi">333</span> <span class="err">看着舒服一点</span>
<span class="p">(</span><span class="n">setq</span> <span class="n">fci</span><span class="o">-</span><span class="n">rule</span><span class="o">-</span><span class="n">column</span> <span class="mi">80</span><span class="p">)</span>    <span class="err">#</span> <span class="err">宽度设置为</span> <span class="mi">80</span> 
<span class="p">(</span><span class="n">define</span><span class="o">-</span><span class="n">globalized</span><span class="o">-</span><span class="n">minor</span><span class="o">-</span><span class="n">mode</span>
  <span class="n">global</span><span class="o">-</span><span class="n">fci</span><span class="o">-</span><span class="n">mode</span> <span class="n">fci</span><span class="o">-</span><span class="n">mode</span> <span class="p">(</span><span class="n">lambda</span> <span class="p">()</span> <span class="p">(</span><span class="n">fci</span><span class="o">-</span><span class="n">mode</span> <span class="mi">1</span><span class="p">)))</span>
<span class="p">(</span><span class="n">global</span><span class="o">-</span><span class="n">fci</span><span class="o">-</span><span class="n">mode</span> <span class="mi">1</span><span class="p">)</span>
</pre></div>


<h2 id="42-auto-complete">4.2 代码自动补全: <a href="https://github.com/auto-complete/auto-complete">auto-complete</a></h2>
<p>对于用管IDE的朋友,我要解释一下,这里的自动补全不是类成员提示, =_=!</p>
<div class="hlcode"><pre><span class="p">(</span><span class="n">require</span> <span class="err">&#39;</span><span class="n">popup</span><span class="p">)</span>
<span class="p">(</span><span class="n">require</span> <span class="err">&#39;</span><span class="k">auto</span><span class="o">-</span><span class="n">complete</span><span class="o">-</span><span class="n">config</span><span class="p">)</span>
<span class="p">(</span><span class="n">add</span><span class="o">-</span><span class="n">to</span><span class="o">-</span><span class="n">list</span> <span class="err">&#39;</span><span class="n">ac</span><span class="o">-</span><span class="n">dictionary</span><span class="o">-</span><span class="n">directories</span>
             <span class="s">&quot;~/.emacs.d/auto-complete/dict&quot;</span><span class="p">)</span>
<span class="p">(</span><span class="n">ac</span><span class="o">-</span><span class="n">config</span><span class="o">-</span><span class="k">default</span><span class="p">)</span>
<span class="p">(</span><span class="n">setq</span> <span class="n">ac</span><span class="o">-</span><span class="n">use</span><span class="o">-</span><span class="n">quick</span><span class="o">-</span><span class="n">help</span> <span class="n">nil</span><span class="p">)</span>
<span class="p">(</span><span class="n">setq</span> <span class="n">ac</span><span class="o">-</span><span class="n">ignore</span><span class="o">-</span><span class="k">case</span> <span class="n">t</span><span class="p">)</span>
<span class="p">(</span><span class="n">setq</span> <span class="n">ac</span><span class="o">-</span><span class="n">menu</span><span class="o">-</span><span class="n">height</span> <span class="mi">8</span><span class="p">)</span>

<span class="p">(</span><span class="n">setq</span> <span class="n">ac</span><span class="o">-</span><span class="n">use</span><span class="o">-</span><span class="n">menu</span><span class="o">-</span><span class="n">map</span> <span class="n">t</span><span class="p">)</span>
<span class="p">(</span><span class="n">define</span><span class="o">-</span><span class="n">key</span> <span class="n">ac</span><span class="o">-</span><span class="n">menu</span><span class="o">-</span><span class="n">map</span> <span class="s">&quot;\C-n&quot;</span> <span class="err">&#39;</span><span class="n">ac</span><span class="o">-</span><span class="n">next</span><span class="p">)</span>
<span class="p">(</span><span class="n">define</span><span class="o">-</span><span class="n">key</span> <span class="n">ac</span><span class="o">-</span><span class="n">menu</span><span class="o">-</span><span class="n">map</span> <span class="s">&quot;\C-p&quot;</span> <span class="err">&#39;</span><span class="n">ac</span><span class="o">-</span><span class="n">previous</span><span class="p">)</span>
<span class="p">(</span><span class="n">global</span><span class="o">-</span><span class="n">set</span><span class="o">-</span><span class="n">key</span> <span class="s">&quot;\M-/&quot;</span> <span class="err">&#39;</span><span class="k">auto</span><span class="o">-</span><span class="n">complete</span><span class="p">)</span>
</pre></div>


<p>auto-complete 和 <a href="https://github.com/capitaomorte/yasnippet">yasnippet</a> 是一对好基友，yasnippet 支持很多语言的语法补全，感兴趣可以尝试一下(我不太喜欢用，感觉会影响加载速度)。</p>
<h2 id="43-highlight-symbol">4.3 相同符号高亮: <a href="https://github.com/nschum/highlight-symbol.el">highlight-symbol</a></h2>
<p>用这个做查找也挺不错的!</p>
<div class="hlcode"><pre><span class="p">(</span><span class="n">require</span> <span class="err">&#39;</span><span class="n">highlight</span><span class="o">-</span><span class="n">symbol</span><span class="p">)</span>
<span class="p">(</span><span class="n">global</span><span class="o">-</span><span class="n">set</span><span class="o">-</span><span class="n">key</span> <span class="p">(</span><span class="n">kbd</span> <span class="s">&quot;M--&quot;</span><span class="p">)</span> <span class="err">&#39;</span><span class="n">highlight</span><span class="o">-</span><span class="n">symbol</span><span class="o">-</span><span class="n">at</span><span class="o">-</span><span class="n">point</span><span class="p">)</span>
<span class="p">(</span><span class="n">global</span><span class="o">-</span><span class="n">set</span><span class="o">-</span><span class="n">key</span> <span class="p">(</span><span class="n">kbd</span> <span class="s">&quot;M-n&quot;</span><span class="p">)</span> <span class="err">&#39;</span><span class="n">highlight</span><span class="o">-</span><span class="n">symbol</span><span class="o">-</span><span class="n">next</span><span class="p">)</span>
<span class="p">(</span><span class="n">global</span><span class="o">-</span><span class="n">set</span><span class="o">-</span><span class="n">key</span> <span class="p">(</span><span class="n">kbd</span> <span class="s">&quot;M-p&quot;</span><span class="p">)</span> <span class="err">&#39;</span><span class="n">highlight</span><span class="o">-</span><span class="n">symbol</span><span class="o">-</span><span class="n">prev</span><span class="p">)</span>
</pre></div>


<h2 id="44-markdown-markdown-mode">4.4 Markdown: <a href="http://jblevins.org/projects/markdown-mode/">markdown-mode</a></h2>
<p>(autoload 'markdown-mode "~/.emacs.d/lisp/markdown-mode/markdown-mode.el"
  "Major mode for editing Markdown files" t)
(setq auto-mode-alist
      (cons '("\.md" . markdown-mode) auto-mode-alist))
(setq auto-mode-alist
      (cons '("\.markdown" . markdown-mode) auto-mode-alist))
(setq auto-mode-alist
      (cons '("\.txt" . markdown-mode) auto-mode-alist))</p>
<h2 id="45-python-pythonel">4.5 Python: <a href="https://github.com/fgallina/python.el">python.el</a></h2>
<p>推荐使用 python.el 而不是 <a href="https://github.com/klen/python-mode">python-mode</a>。</p>
<div class="hlcode"><pre><span class="p">(</span><span class="n">require</span> <span class="err">&#39;</span><span class="n">python</span><span class="p">)</span>
</pre></div>


<h2 id="46-google-protobuf-buffer-protobuf-mode">4.6 Google Protobuf Buffer: <a href="http://code.google.com/p/protobuf/source/browse/trunk/editors/protobuf-mode.el?r=227">protobuf-mode</a></h2>
<div class="hlcode"><pre><span class="p">(</span><span class="n">require</span> <span class="err">&#39;</span><span class="n">protobuf</span><span class="o">-</span><span class="n">mode</span><span class="p">)</span>
<span class="p">(</span><span class="n">add</span><span class="o">-</span><span class="n">to</span><span class="o">-</span><span class="n">list</span> <span class="err">&#39;</span><span class="k">auto</span><span class="o">-</span><span class="n">mode</span><span class="o">-</span><span class="n">alist</span> <span class="err">&#39;</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\\</span><span class="s">.proto$&quot;</span> <span class="p">.</span> <span class="n">protobuf</span><span class="o">-</span><span class="n">mode</span><span class="p">))</span>
</pre></div>


<h2 id="47-c-xcscope-etags-c-mode">4.7 C++开发定制: xcscope + etags + c++-mode</h2>
<div class="hlcode"><pre><span class="p">;;</span> <span class="err">编译与调试</span>
<span class="p">(</span><span class="n">global</span><span class="o">-</span><span class="n">set</span><span class="o">-</span><span class="n">key</span> <span class="p">[(</span><span class="n">f5</span><span class="p">)]</span> <span class="err">&#39;</span><span class="n">compile</span><span class="p">)</span>

<span class="p">(</span><span class="n">require</span> <span class="err">&#39;</span><span class="n">xcscope</span><span class="p">)</span>
<span class="p">(</span><span class="n">cscope</span><span class="o">-</span><span class="n">setup</span><span class="p">)</span>

<span class="p">(</span><span class="n">global</span><span class="o">-</span><span class="n">set</span><span class="o">-</span><span class="n">key</span> <span class="p">[(</span><span class="n">f9</span><span class="p">)]</span> <span class="err">&#39;</span><span class="n">ff</span><span class="o">-</span><span class="n">find</span><span class="o">-</span><span class="n">other</span><span class="o">-</span><span class="n">file</span><span class="p">)</span>

<span class="p">(</span><span class="n">setq</span> <span class="n">tab</span><span class="o">-</span><span class="n">stop</span><span class="o">-</span><span class="n">list</span> <span class="p">())</span>
<span class="p">(</span><span class="n">loop</span> <span class="k">for</span> <span class="n">x</span> <span class="n">downfrom</span> <span class="mi">40</span> <span class="n">to</span> <span class="mi">1</span> <span class="k">do</span>
      <span class="p">(</span><span class="n">setq</span> <span class="n">tab</span><span class="o">-</span><span class="n">stop</span><span class="o">-</span><span class="n">list</span> <span class="p">(</span><span class="n">cons</span> <span class="p">(</span><span class="o">*</span> <span class="n">x</span> <span class="mi">4</span><span class="p">)</span> <span class="n">tab</span><span class="o">-</span><span class="n">stop</span><span class="o">-</span><span class="n">list</span><span class="p">)))</span>

<span class="p">(</span><span class="n">defconst</span> <span class="n">my</span><span class="o">-</span><span class="n">c</span><span class="o">-</span><span class="n">style</span>
  <span class="err">&#39;</span><span class="p">(</span>
    <span class="p">(</span><span class="n">c</span><span class="o">-</span><span class="n">tab</span><span class="o">-</span><span class="n">always</span><span class="o">-</span><span class="n">indent</span>        <span class="p">.</span> <span class="n">t</span><span class="p">)</span>
    <span class="p">(</span><span class="n">c</span><span class="o">-</span><span class="n">hanging</span><span class="o">-</span><span class="n">braces</span><span class="o">-</span><span class="n">alist</span>     <span class="p">.</span> <span class="p">((</span><span class="n">substatement</span><span class="o">-</span><span class="n">open</span> <span class="n">after</span><span class="p">)</span>
                                   <span class="p">(</span><span class="n">brace</span><span class="o">-</span><span class="n">list</span><span class="o">-</span><span class="n">open</span><span class="p">)))</span>
    <span class="p">(</span><span class="n">c</span><span class="o">-</span><span class="n">hanging</span><span class="o">-</span><span class="n">colons</span><span class="o">-</span><span class="n">alist</span>     <span class="p">.</span> <span class="p">((</span><span class="n">member</span><span class="o">-</span><span class="n">init</span><span class="o">-</span><span class="n">intro</span> <span class="n">before</span><span class="p">)</span>
                                   <span class="p">(</span><span class="n">inher</span><span class="o">-</span><span class="n">intro</span><span class="p">)</span><span class="err">&#39;</span>
                                   <span class="p">(</span><span class="n">label</span> <span class="n">after</span><span class="p">)</span>
                                   <span class="p">(</span><span class="n">acecss</span><span class="o">-</span><span class="n">label</span> <span class="n">after</span><span class="p">)))</span>
    <span class="p">(</span><span class="n">c</span><span class="o">-</span><span class="n">cleanup</span><span class="o">-</span><span class="n">list</span>             <span class="p">.</span> <span class="p">(</span><span class="n">scope</span><span class="o">-</span><span class="n">operator</span>
                                   <span class="n">empty</span><span class="o">-</span><span class="n">defun</span><span class="o">-</span><span class="n">braces</span>
                                   <span class="n">defun</span><span class="o">-</span><span class="n">close</span><span class="o">-</span><span class="n">semi</span><span class="p">))</span>
    <span class="p">(</span><span class="n">c</span><span class="o">-</span><span class="n">offsets</span><span class="o">-</span><span class="n">alist</span>            <span class="p">.</span> <span class="p">((</span><span class="n">arglist</span><span class="o">-</span><span class="n">close</span> <span class="p">.</span> <span class="n">c</span><span class="o">-</span><span class="n">lineup</span><span class="o">-</span><span class="n">arglist</span><span class="p">)</span>
                                   <span class="p">(</span><span class="k">case</span><span class="o">-</span><span class="n">label</span> <span class="p">.</span> <span class="mi">4</span><span class="p">)</span>
                                   <span class="p">(</span><span class="n">substatement</span><span class="o">-</span><span class="n">open</span> <span class="p">.</span> <span class="mi">0</span><span class="p">)</span>
                                   <span class="p">(</span><span class="n">block</span><span class="o">-</span><span class="n">open</span>        <span class="p">.</span> <span class="mi">0</span><span class="p">)</span>
                                   <span class="p">(</span><span class="n">knr</span><span class="o">-</span><span class="n">argdecl</span><span class="o">-</span><span class="n">intro</span> <span class="p">.</span> <span class="o">-</span><span class="p">)</span>
                                   <span class="p">(</span><span class="n">innamespace</span> <span class="p">.</span> <span class="o">-</span><span class="p">)</span>
                                   <span class="p">(</span><span class="kr">inline</span><span class="o">-</span><span class="n">open</span> <span class="p">.</span> <span class="mi">0</span><span class="p">)</span>
                                   <span class="p">(</span><span class="n">inher</span><span class="o">-</span><span class="n">cont</span> <span class="p">.</span> <span class="n">c</span><span class="o">-</span><span class="n">lineup</span><span class="o">-</span><span class="n">multi</span><span class="o">-</span><span class="n">inher</span><span class="p">)</span>
                                   <span class="p">(</span><span class="n">arglist</span><span class="o">-</span><span class="n">cont</span><span class="o">-</span><span class="n">nonempty</span> <span class="p">.</span> <span class="o">+</span><span class="p">)</span>
                                   <span class="p">(</span><span class="n">template</span><span class="o">-</span><span class="n">args</span><span class="o">-</span><span class="n">cont</span> <span class="p">.</span> <span class="o">+</span> <span class="p">)))</span>
    <span class="p">(</span><span class="n">c</span><span class="o">-</span><span class="n">echo</span><span class="o">-</span><span class="n">syntactic</span><span class="o">-</span><span class="n">information</span><span class="o">-</span><span class="n">p</span> <span class="p">.</span> <span class="n">t</span><span class="p">)</span>
    <span class="p">)</span>
  <span class="s">&quot;My C Programming Style&quot;</span><span class="p">)</span>

<span class="p">;;</span> <span class="n">offset</span> <span class="n">customizations</span> <span class="n">not</span> <span class="n">in</span> <span class="n">my</span><span class="o">-</span><span class="n">c</span><span class="o">-</span><span class="n">style</span>
<span class="p">(</span><span class="n">setq</span> <span class="n">c</span><span class="o">-</span><span class="n">offsets</span><span class="o">-</span><span class="n">alist</span> <span class="err">&#39;</span><span class="p">((</span><span class="n">member</span><span class="o">-</span><span class="n">init</span><span class="o">-</span><span class="n">intro</span> <span class="p">.</span> <span class="o">++</span><span class="p">)))</span>

<span class="p">;;</span> <span class="n">Customizations</span> <span class="k">for</span> <span class="n">all</span> <span class="n">modes</span> <span class="n">in</span> <span class="n">CC</span> <span class="n">Mode</span><span class="p">.</span>
<span class="p">(</span><span class="n">defun</span> <span class="n">my</span><span class="o">-</span><span class="n">c</span><span class="o">-</span><span class="n">mode</span><span class="o">-</span><span class="n">common</span><span class="o">-</span><span class="n">hook</span> <span class="p">()</span>
  <span class="p">;;</span> <span class="n">add</span> <span class="n">my</span> <span class="n">personal</span> <span class="n">style</span> <span class="n">and</span> <span class="n">set</span> <span class="n">it</span> <span class="k">for</span> <span class="n">the</span> <span class="n">current</span> <span class="nf">buffer</span>
  <span class="p">(</span><span class="n">c</span><span class="o">-</span><span class="n">add</span><span class="o">-</span><span class="n">style</span> <span class="s">&quot;PERSONAL&quot;</span> <span class="n">my</span><span class="o">-</span><span class="n">c</span><span class="o">-</span><span class="n">style</span> <span class="n">t</span><span class="p">)</span>
  <span class="p">;;</span> <span class="n">other</span> <span class="nf">customizations</span>
  <span class="p">(</span><span class="n">setq</span> <span class="n">tab</span><span class="o">-</span><span class="n">width</span> <span class="mi">4</span>
        <span class="n">indent</span><span class="o">-</span><span class="n">tabs</span><span class="o">-</span><span class="n">mode</span> <span class="n">nil</span><span class="p">)</span>
  <span class="p">;;</span> <span class="n">we</span> <span class="n">like</span> <span class="k">auto</span><span class="o">-</span><span class="n">newline</span> <span class="n">and</span> <span class="n">hungry</span><span class="o">-</span><span class="n">delete</span>
  <span class="p">;;</span> <span class="p">(</span><span class="n">c</span><span class="o">-</span><span class="n">toggle</span><span class="o">-</span><span class="k">auto</span><span class="o">-</span><span class="n">hungry</span><span class="o">-</span><span class="n">state</span> <span class="mi">1</span><span class="p">)</span>
  <span class="p">;;</span> <span class="n">key</span> <span class="n">bindings</span> <span class="k">for</span> <span class="n">all</span> <span class="n">supported</span> <span class="n">languages</span><span class="p">.</span>  <span class="n">We</span> <span class="n">can</span> <span class="n">put</span> <span class="n">these</span> <span class="n">in</span>
  <span class="p">;;</span> <span class="n">c</span><span class="o">-</span><span class="n">mode</span><span class="o">-</span><span class="n">base</span><span class="o">-</span><span class="n">map</span> <span class="n">because</span> <span class="n">c</span><span class="o">-</span><span class="n">mode</span><span class="o">-</span><span class="n">map</span><span class="p">,</span> <span class="n">c</span><span class="o">++-</span><span class="n">mode</span><span class="o">-</span><span class="n">map</span><span class="p">,</span> <span class="n">objc</span><span class="o">-</span><span class="n">mode</span><span class="o">-</span><span class="n">map</span><span class="p">,</span>
  <span class="p">;;</span> <span class="n">java</span><span class="o">-</span><span class="n">mode</span><span class="o">-</span><span class="n">map</span><span class="p">,</span> <span class="n">idl</span><span class="o">-</span><span class="n">mode</span><span class="o">-</span><span class="n">map</span><span class="p">,</span> <span class="n">and</span> <span class="n">pike</span><span class="o">-</span><span class="n">mode</span><span class="o">-</span><span class="n">map</span> <span class="n">inherit</span> <span class="n">from</span> <span class="n">it</span><span class="p">.</span>
  <span class="p">)</span>
<span class="p">(</span><span class="n">add</span><span class="o">-</span><span class="n">hook</span> <span class="err">&#39;</span><span class="n">c</span><span class="o">-</span><span class="n">mode</span><span class="o">-</span><span class="n">common</span><span class="o">-</span><span class="n">hook</span> <span class="err">&#39;</span><span class="n">my</span><span class="o">-</span><span class="n">c</span><span class="o">-</span><span class="n">mode</span><span class="o">-</span><span class="n">common</span><span class="o">-</span><span class="n">hook</span><span class="p">)</span>
<span class="p">(</span><span class="n">add</span><span class="o">-</span><span class="n">hook</span> <span class="err">&#39;</span><span class="n">c</span><span class="o">-</span><span class="n">mode</span><span class="o">-</span><span class="n">hook</span> <span class="err">&#39;</span><span class="n">hs</span><span class="o">-</span><span class="n">minor</span><span class="o">-</span><span class="n">mode</span><span class="p">)</span>

<span class="p">(</span><span class="n">add</span><span class="o">-</span><span class="n">to</span><span class="o">-</span><span class="n">list</span> <span class="err">&#39;</span><span class="k">auto</span><span class="o">-</span><span class="n">mode</span><span class="o">-</span><span class="n">alist</span> <span class="err">&#39;</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\\</span><span class="s">.h</span><span class="se">\\</span><span class="s">&#39;&quot;</span> <span class="p">.</span> <span class="n">c</span><span class="o">++-</span><span class="n">mode</span><span class="p">))</span>

<span class="p">;;</span> <span class="n">http</span><span class="o">:</span><span class="c1">//stackoverflow.com/questions/14668744/emacs-indent-for-c-class-method</span>
<span class="p">(</span><span class="n">defun</span> <span class="n">vlad</span><span class="o">-</span><span class="n">cc</span><span class="o">-</span><span class="n">style</span><span class="p">()</span>
  <span class="p">(</span><span class="n">c</span><span class="o">-</span><span class="n">set</span><span class="o">-</span><span class="n">offset</span> <span class="err">&#39;</span><span class="kr">inline</span><span class="o">-</span><span class="n">open</span> <span class="err">&#39;</span><span class="mi">0</span><span class="p">)</span>
  <span class="p">)</span>
<span class="p">(</span><span class="n">add</span><span class="o">-</span><span class="n">hook</span> <span class="err">&#39;</span><span class="n">c</span><span class="o">++-</span><span class="n">mode</span><span class="o">-</span><span class="n">hook</span> <span class="err">&#39;</span><span class="n">vlad</span><span class="o">-</span><span class="n">cc</span><span class="o">-</span><span class="n">style</span><span class="p">)</span>
</pre></div>


<p><a href="https://github.com/dkogan/xcscope.el">xcscope.el</a> 使用:</p>
<ul>
<li>cscope -r : 在根目录下递归生成数据库</li>
<li>C-c s a : Set initial directory;</li>
<li>C-c s A : Unset initial directory;</li>
<li>C-c c I : create list of files to index;</li>
<li>C-c s s : Find symbol;</li>
<li>C-c s d : Find global definition;</li>
<li>C-c s c : Find functions calling a function;</li>
<li>C-c s C : Find called functions (list functions called from a function);</li>
<li>C-c s t : Find text string;</li>
<li>C-c s e : Find egrep pattern;</li>
<li>C-c s f : Find a file;</li>
<li>C-c s i : Find files #including a file;</li>
<li>C-c s b : Display cscope buffer;</li>
</ul>
<p>etags 使用:</p>
<p>搭配 <code>find</code> 来生成 tags:</p>
<div class="hlcode"><pre><span class="n">find</span> <span class="p">.</span> <span class="o">-</span><span class="n">name</span> <span class="err">&#39;</span><span class="o">*</span><span class="p">.</span><span class="n">c</span><span class="err">&#39;</span> <span class="o">-</span><span class="n">o</span> <span class="o">-</span><span class="n">name</span> <span class="err">&#39;</span><span class="o">*</span><span class="p">.</span><span class="n">cpp</span><span class="err">&#39;</span> <span class="o">-</span><span class="n">o</span> <span class="o">-</span><span class="n">name</span> <span class="err">&#39;</span><span class="o">*</span><span class="p">.</span><span class="n">h</span><span class="err">&#39;</span> <span class="o">-</span><span class="n">print</span> <span class="o">|</span> <span class="n">etags</span> <span class="o">-</span>
</pre></div>


<ul>
<li><code>M-x visit-tags-table &lt;RET&gt; FILE &lt;RET&gt;</code> : 选择tags文件</li>
<li><code>M-. [TAG] &lt;RET&gt;</code> : 访问标签</li>
<li><code>M-*</code> : 返回</li>
<li><code>C-u M-.</code> : 寻找标签的下一个定义</li>
</ul>
<p>其它：</p>
<ul>
<li><code>F9</code> : 在头文件和对应源文件之间跳转: <code>(global-set-key [(f9)] 'ff-find-other-file)</code></li>
</ul>
<h2 id="48-emacs">4.8 Emacs主题</h2>
<p>把 主题 放到最后，是想告诉大家，使用 Emacs(或者其它任何工具) 时，不要花时间在这些炫酷的东西上面，还是要聚焦于实用和高效。Emacs24自带了几款主题(Emacs23没有的哦)，使用 <code>M-x customize-theme</code> 回车可查看配色效果。确定喜欢的一款注意后在配置文件中添加一行代码就可以啦。</p>
<p>我一般使用 wombat ，即 <code>(load-theme 'wombat)</code>。</p>
<h1 id="_4">五、学习资源</h1>
<h2 id="51">5.1 视频</h2>
<ul>
<li><a href="http://www.youtube.com/watch?v=Ib914gNr0ys&amp;feature=share">Emacs as a C/C++ Editor/IDE (Part 3): cedet mode for true intellisense</a></li>
</ul>
<h2 id="52">5.2 网站(博客)</h2>
<ul>
<li><a href="http://www.gnu.org/software/emacs/manual/">GNU Emacs Manuals Online</a></li>
<li><a href="http://emacsredux.com/">Emacs Redux</a></li>
<li><a href="http://jblevins.org/projects/markdown-mode/">Emacs Markdown Mode</a></li>
</ul>
<h2 id="53">5.3 参考/扩展资料</h2>
<ul>
<li><a href="https://github.com/redguardtoo/mastering-emacs-in-one-year-guide/blob/master/guide-zh.org">一年成为Emacs高手(像神一样使用编辑器)</a></li>
<li><a href="http://www.jesshamrick.com/2012/09/18/emacs-as-a-python-ide/">Emacs as a Python IDE</a></li>
<li><a href="http://jianlee.ylinux.org/Computer/Emacs/emacsBFE99F8FE883.html">Emacs快速参考</a></li>
<li><a href="http://www.gnu.org/software/emacs/manual/html_node/emacs/Case.html">Case Conversion Commands</a></li>
<li><a href="http://www.gnu.org/software/emacs/manual/html_node/emacs/Rectangles.html">Rectangles</a></li>
<li><a href="http://www.caole.net/diary/emacs_write_cpp.html">曹乐: 在Emacs下用C/C++编程</a></li>
</ul>
</div>

        </div>
        <div id="footer">
            <span>
                Copyright © 2012-2014 .
                Powered by <a href="http://simiki.org/" target="_blank">Simiki</a>.
            </span>
        </div>
        
    </body>
</html>